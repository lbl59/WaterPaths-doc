<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WaterPaths: Transfers Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WaterPaths
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classTransfers-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Transfers Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="Transfers_8h_source.html">Transfers.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Transfers:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classTransfers.png" usemap="#Transfers_map" alt=""/>
  <map id="Transfers_map" name="Transfers_map">
<area href="classDroughtMitigationPolicy.html" alt="DroughtMitigationPolicy" shape="rect" coords="0,0,146,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a40555bc28e085d0e119a9f039317c79f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTransfers.html#a40555bc28e085d0e119a9f039317c79f">Transfers</a> (const int <a class="el" href="classDroughtMitigationPolicy.html#abf3ed19ed98e0d74dc9ae24094be640b">id</a>, const int source_utility_id, int transfer_water_source_id, const double source_treatment_buffer, const vector&lt; int &gt; &amp;buyers_ids, const vector&lt; double &gt; &amp;pipe_transfer_capacities, const vector&lt; double &gt; &amp;buyers_transfer_triggers, const <a class="el" href="classGraph.html">Graph</a> utilities_graph, vector&lt; double &gt; conveyance_costs, vector&lt; int &gt; pipe_owner)</td></tr>
<tr class="separator:a40555bc28e085d0e119a9f039317c79f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af88f7908692240eec9f3179128c6f343"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTransfers.html#af88f7908692240eec9f3179128c6f343">Transfers</a> (const <a class="el" href="classTransfers.html">Transfers</a> &amp;transfers)</td></tr>
<tr class="separator:af88f7908692240eec9f3179128c6f343"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c687c9f767ea915eead1f5db18711a2"><td class="memItemLeft" align="right" valign="top">const vector&lt; double &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTransfers.html#a6c687c9f767ea915eead1f5db18711a2">getAllocations</a> () const</td></tr>
<tr class="separator:a6c687c9f767ea915eead1f5db18711a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dfeafe7a9b9a446b1ab746b65ef3b4b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTransfers.html#a5dfeafe7a9b9a446b1ab746b65ef3b4b">~Transfers</a> ()</td></tr>
<tr class="separator:a5dfeafe7a9b9a446b1ab746b65ef3b4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9e4e83ff763ac1ba518a19051cd2e69"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTransfers.html#ad9e4e83ff763ac1ba518a19051cd2e69">applyPolicy</a> (int week) override</td></tr>
<tr class="separator:ad9e4e83ff763ac1ba518a19051cd2e69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c1930dbeb1273c1c0be93ad5ca57357"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTransfers.html#a3c1930dbeb1273c1c0be93ad5ca57357">addSystemComponents</a> (vector&lt; <a class="el" href="classUtility.html">Utility</a> *&gt; system_utilities, vector&lt; <a class="el" href="classWaterSource.html">WaterSource</a> *&gt; water_sources, vector&lt; <a class="el" href="classMinEnvFlowControl.html">MinEnvFlowControl</a> *&gt; min_env_flow_controls) override</td></tr>
<tr class="separator:a3c1930dbeb1273c1c0be93ad5ca57357"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a156baa248ab355c895a0a2f9e5f2742a"><td class="memItemLeft" align="right" valign="top">vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTransfers.html#a156baa248ab355c895a0a2f9e5f2742a">solve_QP</a> (vector&lt; double &gt; allocation_requests, double available_transfer_volume, double min_transfer_volume, int week)</td></tr>
<tr class="separator:a156baa248ab355c895a0a2f9e5f2742a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75342a7c14b2ff69eb2520de240a1131"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTransfers.html#a75342a7c14b2ff69eb2520de240a1131">setRealization</a> (unsigned long realization_id, vector&lt; double &gt; &amp;utilities_rdm, vector&lt; double &gt; &amp;water_sources_rdm, vector&lt; double &gt; &amp;policy_rdm) override</td></tr>
<tr class="separator:a75342a7c14b2ff69eb2520de240a1131"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classDroughtMitigationPolicy"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classDroughtMitigationPolicy')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classDroughtMitigationPolicy.html">DroughtMitigationPolicy</a></td></tr>
<tr class="memitem:a00cce0117a5bc0c446727e0c0c59a8df inherit pub_methods_classDroughtMitigationPolicy"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDroughtMitigationPolicy.html#a00cce0117a5bc0c446727e0c0c59a8df">DroughtMitigationPolicy</a> (const int <a class="el" href="classDroughtMitigationPolicy.html#abf3ed19ed98e0d74dc9ae24094be640b">id</a>, const int <a class="el" href="classDroughtMitigationPolicy.html#aaea5016d1462bec889cb8df85aececc6">type</a>)</td></tr>
<tr class="separator:a00cce0117a5bc0c446727e0c0c59a8df inherit pub_methods_classDroughtMitigationPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad53e4f995e3fe18b580f39d15daeefc inherit pub_methods_classDroughtMitigationPolicy"><td class="memItemLeft" align="right" valign="top">const vector&lt; int &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDroughtMitigationPolicy.html#aad53e4f995e3fe18b580f39d15daeefc">getUtilities_ids</a> () const</td></tr>
<tr class="separator:aad53e4f995e3fe18b580f39d15daeefc inherit pub_methods_classDroughtMitigationPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bf7d0fa94377ae6814e529daf0204c4 inherit pub_methods_classDroughtMitigationPolicy"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDroughtMitigationPolicy.html#a0bf7d0fa94377ae6814e529daf0204c4">operator&lt;</a> (const <a class="el" href="classDroughtMitigationPolicy.html">DroughtMitigationPolicy</a> *other)</td></tr>
<tr class="separator:a0bf7d0fa94377ae6814e529daf0204c4 inherit pub_methods_classDroughtMitigationPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a576d3ddb09dc9372898a63c0949d08a6 inherit pub_methods_classDroughtMitigationPolicy"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDroughtMitigationPolicy.html#a576d3ddb09dc9372898a63c0949d08a6">operator&gt;</a> (const <a class="el" href="classDroughtMitigationPolicy.html">DroughtMitigationPolicy</a> *other)</td></tr>
<tr class="separator:a576d3ddb09dc9372898a63c0949d08a6 inherit pub_methods_classDroughtMitigationPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91ff1ca816dcb044e1e10a6c2a8e56a0 inherit pub_methods_classDroughtMitigationPolicy"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDroughtMitigationPolicy.html#a91ff1ca816dcb044e1e10a6c2a8e56a0">~DroughtMitigationPolicy</a> ()</td></tr>
<tr class="separator:a91ff1ca816dcb044e1e10a6c2a8e56a0 inherit pub_methods_classDroughtMitigationPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75710a6ab73213223222b3472f9251c0 inherit pub_methods_classDroughtMitigationPolicy"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDroughtMitigationPolicy.html#a75710a6ab73213223222b3472f9251c0">setStorage_to_rof_table_</a> (vector&lt; <a class="el" href="classMatrix2D.html">Matrix2D</a>&lt; double &gt;&gt; &amp;storage_to_rof_table_, int <a class="el" href="classDroughtMitigationPolicy.html#ace2a2425f6608c34a3189c11445978a1">use_imported_tables</a>)</td></tr>
<tr class="separator:a75710a6ab73213223222b3472f9251c0 inherit pub_methods_classDroughtMitigationPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_attribs_classDroughtMitigationPolicy"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classDroughtMitigationPolicy')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="classDroughtMitigationPolicy.html">DroughtMitigationPolicy</a></td></tr>
<tr class="memitem:abf3ed19ed98e0d74dc9ae24094be640b inherit pub_attribs_classDroughtMitigationPolicy"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDroughtMitigationPolicy.html#abf3ed19ed98e0d74dc9ae24094be640b">id</a></td></tr>
<tr class="separator:abf3ed19ed98e0d74dc9ae24094be640b inherit pub_attribs_classDroughtMitigationPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaea5016d1462bec889cb8df85aececc6 inherit pub_attribs_classDroughtMitigationPolicy"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDroughtMitigationPolicy.html#aaea5016d1462bec889cb8df85aececc6">type</a></td></tr>
<tr class="separator:aaea5016d1462bec889cb8df85aececc6 inherit pub_attribs_classDroughtMitigationPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classDroughtMitigationPolicy"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classDroughtMitigationPolicy')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classDroughtMitigationPolicy.html">DroughtMitigationPolicy</a></td></tr>
<tr class="memitem:aaf0715876ce33a75c7db92e50523ea0c inherit pro_methods_classDroughtMitigationPolicy"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDroughtMitigationPolicy.html#aaf0715876ce33a75c7db92e50523ea0c">DroughtMitigationPolicy</a> (const <a class="el" href="classDroughtMitigationPolicy.html">DroughtMitigationPolicy</a> &amp;drought_mitigation_policy)</td></tr>
<tr class="separator:aaf0715876ce33a75c7db92e50523ea0c inherit pro_methods_classDroughtMitigationPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a685ce7eacb01cb262d7e5245a736aa38 inherit pro_methods_classDroughtMitigationPolicy"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDroughtMitigationPolicy.html#a685ce7eacb01cb262d7e5245a736aa38">getRofFromRealizationTable</a> (int utility_id, int week, int tier)</td></tr>
<tr class="separator:a685ce7eacb01cb262d7e5245a736aa38 inherit pro_methods_classDroughtMitigationPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classDroughtMitigationPolicy"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classDroughtMitigationPolicy')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classDroughtMitigationPolicy.html">DroughtMitigationPolicy</a></td></tr>
<tr class="memitem:ad19fbc5a9fdf17ed50c0ba0b99d47eca inherit pro_attribs_classDroughtMitigationPolicy"><td class="memItemLeft" align="right" valign="top">vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDroughtMitigationPolicy.html#ad19fbc5a9fdf17ed50c0ba0b99d47eca">utilities_ids</a></td></tr>
<tr class="separator:ad19fbc5a9fdf17ed50c0ba0b99d47eca inherit pro_attribs_classDroughtMitigationPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6e5787a58017804d8598effbeeaba8e inherit pro_attribs_classDroughtMitigationPolicy"><td class="memItemLeft" align="right" valign="top">vector&lt; <a class="el" href="classUtility.html">Utility</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDroughtMitigationPolicy.html#af6e5787a58017804d8598effbeeaba8e">realization_utilities</a></td></tr>
<tr class="separator:af6e5787a58017804d8598effbeeaba8e inherit pro_attribs_classDroughtMitigationPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2104e99c421513902ba66d012484c0e inherit pro_attribs_classDroughtMitigationPolicy"><td class="memItemLeft" align="right" valign="top">vector&lt; <a class="el" href="classWaterSource.html">WaterSource</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDroughtMitigationPolicy.html#ae2104e99c421513902ba66d012484c0e">realization_water_sources</a></td></tr>
<tr class="separator:ae2104e99c421513902ba66d012484c0e inherit pro_attribs_classDroughtMitigationPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af583979405bc5d530ee576df8a6e9324 inherit pro_attribs_classDroughtMitigationPolicy"><td class="memItemLeft" align="right" valign="top">vector&lt; <a class="el" href="classMinEnvFlowControl.html">MinEnvFlowControl</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDroughtMitigationPolicy.html#af583979405bc5d530ee576df8a6e9324">realization_min_env_flow_controls</a></td></tr>
<tr class="separator:af583979405bc5d530ee576df8a6e9324 inherit pro_attribs_classDroughtMitigationPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c5a2dc2aa3a1c7550cdb17045e1fef3 inherit pro_attribs_classDroughtMitigationPolicy"><td class="memItemLeft" align="right" valign="top">vector&lt; vector&lt; double &gt; &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDroughtMitigationPolicy.html#a4c5a2dc2aa3a1c7550cdb17045e1fef3">rdm_factors_all</a></td></tr>
<tr class="separator:a4c5a2dc2aa3a1c7550cdb17045e1fef3 inherit pro_attribs_classDroughtMitigationPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abef5c917bbc076514fe61bfebbd0e4fc inherit pro_attribs_classDroughtMitigationPolicy"><td class="memItemLeft" align="right" valign="top">double *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDroughtMitigationPolicy.html#abef5c917bbc076514fe61bfebbd0e4fc">rdm_factors_realization</a></td></tr>
<tr class="separator:abef5c917bbc076514fe61bfebbd0e4fc inherit pro_attribs_classDroughtMitigationPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace2a2425f6608c34a3189c11445978a1 inherit pro_attribs_classDroughtMitigationPolicy"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDroughtMitigationPolicy.html#ace2a2425f6608c34a3189c11445978a1">use_imported_tables</a></td></tr>
<tr class="separator:ace2a2425f6608c34a3189c11445978a1 inherit pro_attribs_classDroughtMitigationPolicy"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a40555bc28e085d0e119a9f039317c79f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40555bc28e085d0e119a9f039317c79f">&#9670;&nbsp;</a></span>Transfers() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Transfers::Transfers </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>source_utility_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>transfer_water_source_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>source_treatment_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>buyers_ids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>pipe_transfer_capacities</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>buyers_transfer_triggers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classGraph.html">Graph</a>&#160;</td>
          <td class="paramname"><em>utilities_graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; double &gt;&#160;</td>
          <td class="paramname"><em>conveyance_costs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; int &gt;&#160;</td>
          <td class="paramname"><em>pipe_owner</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocates transfers by trying to minimize the mean square error between the optimal allocations and allocation requests, and between the available amount of water from source and actual conveyed capacity, which is limited by pipe conveyance capacities.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>transfer policy ID. </td></tr>
    <tr><td class="paramname">source_utility_id</td><td>ID of source utility. </td></tr>
    <tr><td class="paramname">source_treatment_buffer</td><td>treatment capacity to be left unused in source utility. </td></tr>
    <tr><td class="paramname">buyers_ids</td><td></td></tr>
    <tr><td class="paramname">pipe_transfer_capacities</td><td></td></tr>
    <tr><td class="paramname">buyers_transfer_triggers</td><td></td></tr>
    <tr><td class="paramname">conveyance_costs</td><td>amount charged by pipe owning utility to convey water to another utility. </td></tr>
    <tr><td class="paramname">pipe_owner</td><td>id of utility owning each pipe.</td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd><p class="startdd">add the possibility of two or more sources. </p>
<p>add the possibility of having a pipe belong to a utility not in the transfer agreement. This can be accomplished now by adding utility to transfer agreement and set its risk of failure to 1.1 or more. </p>
<p class="enddd">calculation and charge of wheeling fees. </p>
</dd></dl>
<p>Map buyer's IDs to vertexes ID starting from 0 for the sake of determining payments. <br />
<br />
<br />
<br />
<br />
<br />
 Create QP matrices and vectors. min f(x) = 1/2 x G x' + g0 x' s.t. CE.x = ce0 CI.x &gt;= ci0 lb &lt;= x &lt;= ub <br />
<br />
<br />
<br />
<br />
 Create g0 vector of 0's to be filled when policy is applied.</p>
<p>size is number of variables x number of utilities (source + requesting utilities). Continuity matrix: +1 for flow entering utility and -1 for leaving. <br />
<br />
<br />
 Create ce0 vector of 0 so that mass balance is enforced on the nodes (utilities). <br />
<br />
 Create empty CI and ci0. They'll be re-dimensioned in the QP solver.</p>
<p>Fill in pipe capacities part of lower and upper bound vectors. </p>

</div>
</div>
<a id="af88f7908692240eec9f3179128c6f343"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af88f7908692240eec9f3179128c6f343">&#9670;&nbsp;</a></span>Transfers() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Transfers::Transfers </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransfers.html">Transfers</a> &amp;&#160;</td>
          <td class="paramname"><em>transfers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Copy constructor </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">transfers</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5dfeafe7a9b9a446b1ab746b65ef3b4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dfeafe7a9b9a446b1ab746b65ef3b4b">&#9670;&nbsp;</a></span>~Transfers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Transfers::~Transfers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destructor </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3c1930dbeb1273c1c0be93ad5ca57357"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c1930dbeb1273c1c0be93ad5ca57357">&#9670;&nbsp;</a></span>addSystemComponents()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Transfers::addSystemComponents </td>
          <td>(</td>
          <td class="paramtype">vector&lt; <a class="el" href="classUtility.html">Utility</a> *&gt;&#160;</td>
          <td class="paramname"><em>system_utilities</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; <a class="el" href="classWaterSource.html">WaterSource</a> *&gt;&#160;</td>
          <td class="paramname"><em>water_sources</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; <a class="el" href="classMinEnvFlowControl.html">MinEnvFlowControl</a> *&gt;&#160;</td>
          <td class="paramname"><em>min_env_flow_controls</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Adds source and buying utility. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">system_utilities</td><td><a class="el" href="classUtility.html">Utility</a> to be added. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classDroughtMitigationPolicy.html#aaab042a79d781afe8e08753b7012372a">DroughtMitigationPolicy</a>.</p>

</div>
</div>
<a id="ad9e4e83ff763ac1ba518a19051cd2e69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9e4e83ff763ac1ba518a19051cd2e69">&#9670;&nbsp;</a></span>applyPolicy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Transfers::applyPolicy </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>week</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get summation of rofs of utilities needing transfers. This is for splitting the available flow rate and for checking weather any transfers will be needed.</p>
<p>Check if transfers will be needed and, if so, perform the transfers.</p>
<p>Total volume available for transfers in source utility.</p>
<p>Minimum volume to be allocated to any utility.</p>
<p>Split up total volume available among the utilities proportionally to their ROFs. <br />
<br />
 Calculate allocations and flow rates through inter-utility connections. <br />
 Mitigate demands. </p>

<p>Implements <a class="el" href="classDroughtMitigationPolicy.html#a76c1a85eaf7707306fe173b6437cc31d">DroughtMitigationPolicy</a>.</p>

</div>
</div>
<a id="a6c687c9f767ea915eead1f5db18711a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c687c9f767ea915eead1f5db18711a2">&#9670;&nbsp;</a></span>getAllocations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const vector&lt; double &gt; &amp; Transfers::getAllocations </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a75342a7c14b2ff69eb2520de240a1131"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75342a7c14b2ff69eb2520de240a1131">&#9670;&nbsp;</a></span>setRealization()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Transfers::setRealization </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>realization_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>utilities_rdm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>water_sources_rdm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>policy_rdm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classDroughtMitigationPolicy.html#a5d2033543cacca1e412eebef5106eab4">DroughtMitigationPolicy</a>.</p>

</div>
</div>
<a id="a156baa248ab355c895a0a2f9e5f2742a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a156baa248ab355c895a0a2f9e5f2742a">&#9670;&nbsp;</a></span>solve_QP()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt; double &gt; Transfers::solve_QP </td>
          <td>(</td>
          <td class="paramtype">vector&lt; double &gt;&#160;</td>
          <td class="paramname"><em>allocation_requests</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>available_transfer_volume</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>min_transfer_volume</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>week</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Solves Quadratic Programming problem to find optimal allocations given transfer requests and constraints in conveyance capacities. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">allocation_requests</td><td>allocations requested by each utility (0 for utilities not requesting transfers). </td></tr>
    <tr><td class="paramname">available_transfer_volume</td><td>Total volume available for transfer from source utility. </td></tr>
    <tr><td class="paramname">min_transfer_volume</td><td>minimum transfer to be made to each utility. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<p>Set g0 vector to allocated to 2 * target_allocation.</p>
<p>Set allocation bounds to 0 if no allocation is requested, and to available transfer volume otherwise. <br />
<br />
<br />
<br />
<br />
 Set upper bound of the last utility (source) to total amount of water available. This allows for a smaller transferred volume, in case pipes cannot convey full amount available, but sets the cap as total amount available. <br />
<br />
<br />
<br />
 Prevent minimum allocation from being more than capacity of pipes connected to utility. If it happens, decrease it to half of the sum of adjacent pipes capacities so that it avoid issues with bottle-necks through the network. The factor of 2 can be changed to any number smaller than 1. <br />
<br />
<br />
 Initialize allocations vector with 0s.</p>
<p>Run quadratic programming solver.</p>
<p>Convert <a class="el" href="classVector.html">Vector</a> x into a vector. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/DroughtMitigationInstruments/<a class="el" href="Transfers_8h_source.html">Transfers.h</a></li>
<li>src/DroughtMitigationInstruments/<a class="el" href="Transfers_8cpp.html">Transfers.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
