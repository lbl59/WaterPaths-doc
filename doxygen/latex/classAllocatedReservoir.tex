\hypertarget{classAllocatedReservoir}{}\section{Allocated\+Reservoir Class Reference}
\label{classAllocatedReservoir}\index{Allocated\+Reservoir@{Allocated\+Reservoir}}


{\ttfamily \#include $<$Allocated\+Reservoir.\+h$>$}

Inheritance diagram for Allocated\+Reservoir\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classAllocatedReservoir}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classAllocatedReservoir_a0b2d620a1d1fe9a9fe053269f35a9a70}{Allocated\+Reservoir}} (const char $\ast$\mbox{\hyperlink{classWaterSource_a846ea74c5b453d014f594d41fee8c765}{name}}, const int \mbox{\hyperlink{classWaterSource_a6eafe5dfefd317877d1244e8a7c6e742}{id}}, const vector$<$ \mbox{\hyperlink{classCatchment}{Catchment}} $\ast$$>$ \&\mbox{\hyperlink{classWaterSource_a8c18c34f23f8a06685c1d12f462ed830}{catchments}}, const double \mbox{\hyperlink{classWaterSource_a2ec257b415b248214a8bce7fc5267723}{capacity}}, const double max\+\_\+treatment\+\_\+capacity, \mbox{\hyperlink{classEvaporationSeries}{Evaporation\+Series}} \&\mbox{\hyperlink{classReservoir_a2d2d9b302c13703309bb798d24136810}{evaporation\+\_\+series}}, \mbox{\hyperlink{classDataSeries}{Data\+Series}} $\ast$\mbox{\hyperlink{classReservoir_a46bd5b750963dfa9a57b247fd77ab8ff}{storage\+\_\+area\+\_\+curve}}, vector$<$ int $>$ $\ast$\mbox{\hyperlink{classWaterSource_ac345583fc2d0f7e1db31ee40244d7ace}{utilities\+\_\+with\+\_\+allocations}}, vector$<$ double $>$ $\ast$\mbox{\hyperlink{classWaterSource_a2f6655a80c4847fe039987255d9d998c}{allocated\+\_\+fractions}}, vector$<$ double $>$ $\ast$\mbox{\hyperlink{classWaterSource_aa73fe10cfc6579b2fb79529e1dde5140}{allocated\+\_\+treatment\+\_\+fractions}})
\item 
\mbox{\hyperlink{classAllocatedReservoir_a22794afc1f06d13fc3099015a2250b0d}{Allocated\+Reservoir}} (const char $\ast$\mbox{\hyperlink{classWaterSource_a846ea74c5b453d014f594d41fee8c765}{name}}, const int \mbox{\hyperlink{classWaterSource_a6eafe5dfefd317877d1244e8a7c6e742}{id}}, const vector$<$ \mbox{\hyperlink{classCatchment}{Catchment}} $\ast$$>$ \&\mbox{\hyperlink{classWaterSource_a8c18c34f23f8a06685c1d12f462ed830}{catchments}}, const double \mbox{\hyperlink{classWaterSource_a2ec257b415b248214a8bce7fc5267723}{capacity}}, const double max\+\_\+treatment\+\_\+capacity, \mbox{\hyperlink{classEvaporationSeries}{Evaporation\+Series}} \&\mbox{\hyperlink{classReservoir_a2d2d9b302c13703309bb798d24136810}{evaporation\+\_\+series}}, \mbox{\hyperlink{classDataSeries}{Data\+Series}} $\ast$\mbox{\hyperlink{classReservoir_a46bd5b750963dfa9a57b247fd77ab8ff}{storage\+\_\+area\+\_\+curve}}, const vector$<$ double $>$ \&construction\+\_\+time\+\_\+range, double permitting\+\_\+period, \mbox{\hyperlink{classBond}{Bond}} \&bond, vector$<$ int $>$ $\ast$\mbox{\hyperlink{classWaterSource_ac345583fc2d0f7e1db31ee40244d7ace}{utilities\+\_\+with\+\_\+allocations}}, vector$<$ double $>$ $\ast$\mbox{\hyperlink{classWaterSource_a2f6655a80c4847fe039987255d9d998c}{allocated\+\_\+fractions}}, vector$<$ double $>$ $\ast$\mbox{\hyperlink{classWaterSource_aa73fe10cfc6579b2fb79529e1dde5140}{allocated\+\_\+treatment\+\_\+fractions}})
\item 
\mbox{\hyperlink{classAllocatedReservoir_a17a60d40d936b1a68459d0bd9578aada}{Allocated\+Reservoir}} (const char $\ast$\mbox{\hyperlink{classWaterSource_a846ea74c5b453d014f594d41fee8c765}{name}}, const int \mbox{\hyperlink{classWaterSource_a6eafe5dfefd317877d1244e8a7c6e742}{id}}, const vector$<$ \mbox{\hyperlink{classCatchment}{Catchment}} $\ast$$>$ \&\mbox{\hyperlink{classWaterSource_a8c18c34f23f8a06685c1d12f462ed830}{catchments}}, const double \mbox{\hyperlink{classWaterSource_a2ec257b415b248214a8bce7fc5267723}{capacity}}, const double max\+\_\+treatment\+\_\+capacity, \mbox{\hyperlink{classEvaporationSeries}{Evaporation\+Series}} \&\mbox{\hyperlink{classReservoir_a2d2d9b302c13703309bb798d24136810}{evaporation\+\_\+series}}, double storage\+\_\+area, vector$<$ int $>$ $\ast$\mbox{\hyperlink{classWaterSource_ac345583fc2d0f7e1db31ee40244d7ace}{utilities\+\_\+with\+\_\+allocations}}, vector$<$ double $>$ $\ast$\mbox{\hyperlink{classWaterSource_a2f6655a80c4847fe039987255d9d998c}{allocated\+\_\+fractions}}, vector$<$ double $>$ $\ast$\mbox{\hyperlink{classWaterSource_aa73fe10cfc6579b2fb79529e1dde5140}{allocated\+\_\+treatment\+\_\+fractions}})
\item 
\mbox{\hyperlink{classAllocatedReservoir_a44ac982717a21a0b24bb3019d07ffe89}{Allocated\+Reservoir}} (const char $\ast$\mbox{\hyperlink{classWaterSource_a846ea74c5b453d014f594d41fee8c765}{name}}, const int \mbox{\hyperlink{classWaterSource_a6eafe5dfefd317877d1244e8a7c6e742}{id}}, const vector$<$ \mbox{\hyperlink{classCatchment}{Catchment}} $\ast$$>$ \&\mbox{\hyperlink{classWaterSource_a8c18c34f23f8a06685c1d12f462ed830}{catchments}}, const double \mbox{\hyperlink{classWaterSource_a2ec257b415b248214a8bce7fc5267723}{capacity}}, const double max\+\_\+treatment\+\_\+capacity, \mbox{\hyperlink{classEvaporationSeries}{Evaporation\+Series}} \&\mbox{\hyperlink{classReservoir_a2d2d9b302c13703309bb798d24136810}{evaporation\+\_\+series}}, double storage\+\_\+area, const vector$<$ double $>$ \&construction\+\_\+time\+\_\+range, double permitting\+\_\+period, \mbox{\hyperlink{classBond}{Bond}} \&bond, vector$<$ int $>$ $\ast$\mbox{\hyperlink{classWaterSource_ac345583fc2d0f7e1db31ee40244d7ace}{utilities\+\_\+with\+\_\+allocations}}, vector$<$ double $>$ $\ast$\mbox{\hyperlink{classWaterSource_a2f6655a80c4847fe039987255d9d998c}{allocated\+\_\+fractions}}, vector$<$ double $>$ $\ast$\mbox{\hyperlink{classWaterSource_aa73fe10cfc6579b2fb79529e1dde5140}{allocated\+\_\+treatment\+\_\+fractions}})
\item 
\mbox{\hyperlink{classAllocatedReservoir}{Allocated\+Reservoir}} \& \mbox{\hyperlink{classAllocatedReservoir_a83551e53169014906ce7380005efb4f8}{operator=}} (const \mbox{\hyperlink{classAllocatedReservoir}{Allocated\+Reservoir}} \&allocated\+\_\+reservoir)
\item 
\mbox{\hyperlink{classAllocatedReservoir_a59098eb446ada7a23e914543f3c419c0}{Allocated\+Reservoir}} (const \mbox{\hyperlink{classAllocatedReservoir}{Allocated\+Reservoir}} \&allocated\+\_\+reservoir)
\item 
\mbox{\hyperlink{classAllocatedReservoir_a3fc9aaca619a97d338449384e579900c}{$\sim$\+Allocated\+Reservoir}} ()
\item 
void \mbox{\hyperlink{classAllocatedReservoir_aa5a3683ac3a1e7a778627332c6a7fff7}{apply\+Continuity}} (int week, double \mbox{\hyperlink{classWaterSource_a7a69b2e9b6030f1035e6cf44d2918ee5}{upstream\+\_\+source\+\_\+inflow}}, double \mbox{\hyperlink{classWaterSource_aeb5a2d2d83383a70ca20f3e94635a9c7}{wastewater\+\_\+inflow}}, vector$<$ double $>$ \&demand\+\_\+outflow) override
\item 
void \mbox{\hyperlink{classAllocatedReservoir_aea294cbca1e1630a1307072632d14b05}{set\+Full}} () override
\item 
double \mbox{\hyperlink{classAllocatedReservoir_ae161ebfc285aa69cb8b7f4fe20ee7a2e}{get\+Available\+Allocated\+Volume}} (int utility\+\_\+id) override
\item 
void \mbox{\hyperlink{classAllocatedReservoir_a3a9b7ce2e1d42cc373095cfd40ef2ae2}{remove\+Water}} (int allocation\+\_\+id, double volume) override
\item 
double \mbox{\hyperlink{classAllocatedReservoir_a8b9b38494fa23f0bea78134c82644bf1}{get\+Allocated\+Capacity}} (int utility\+\_\+id) override
\item 
double \mbox{\hyperlink{classAllocatedReservoir_a731381982c9245b0bf24db4082dc74c1}{get\+Allocated\+Fraction}} (int utility\+\_\+id) override
\item 
void \mbox{\hyperlink{classAllocatedReservoir_ab4cd10b1a9b421309844bcec42899b70}{add\+Capacity}} (double \mbox{\hyperlink{classWaterSource_a2ec257b415b248214a8bce7fc5267723}{capacity}}) override
\item 
void \mbox{\hyperlink{classAllocatedReservoir_ab781bee3253277f1dcfa4c12756d9d6f}{add\+Treatment\+Capacity}} (const double added\+\_\+plant\+\_\+treatment\+\_\+capacity, int utility\+\_\+id) override
\item 
double \mbox{\hyperlink{classAllocatedReservoir_aba81b93e1aa1154ce411248903fabde6}{get\+Allocated\+Treatment\+Capacity}} (int utility\+\_\+id) const override
\item 
double \mbox{\hyperlink{classAllocatedReservoir_a114e9cde6a106b786ca0ed39283cbbed}{get\+Supply\+Allocated\+Fraction}} (int utility\+\_\+id) override
\item 
bool \mbox{\hyperlink{classAllocatedReservoir_a9d025365aa42dfff13a0aac8ea7863fa}{mass\+\_\+balance\+\_\+with\+\_\+wq\+\_\+pool}} (double net\+\_\+inflow, vector$<$ double $>$ \&demand\+\_\+outflow)
\item 
bool \mbox{\hyperlink{classAllocatedReservoir_ac719b30d5a83ba19ea722449ce9580e1}{mass\+\_\+balance\+\_\+without\+\_\+wq\+\_\+pool}} (double net\+\_\+inflow, vector$<$ double $>$ \&demand\+\_\+outflow)
\item 
void \mbox{\hyperlink{classAllocatedReservoir_a739d93f7981f597a3db0a3d613304b8e}{set\+Online}} () override
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
const bool \mbox{\hyperlink{classAllocatedReservoir_af6a1924f60de19b7f77781af0419c39b}{has\+\_\+water\+\_\+quality\+\_\+pool}}
\item 
double \mbox{\hyperlink{classAllocatedReservoir_ae34d7123ff096d676609e32ba4b83e47}{continuity\+\_\+error}}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classAllocatedReservoir_a0b2d620a1d1fe9a9fe053269f35a9a70}\label{classAllocatedReservoir_a0b2d620a1d1fe9a9fe053269f35a9a70}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{Allocated\+Reservoir()}{AllocatedReservoir()}\hspace{0.1cm}{\footnotesize\ttfamily [1/5]}}
{\footnotesize\ttfamily Allocated\+Reservoir\+::\+Allocated\+Reservoir (\begin{DoxyParamCaption}\item[{const char $\ast$}]{name,  }\item[{const int}]{id,  }\item[{const vector$<$ \mbox{\hyperlink{classCatchment}{Catchment}} $\ast$$>$ \&}]{catchments,  }\item[{const double}]{capacity,  }\item[{const double}]{max\+\_\+treatment\+\_\+capacity,  }\item[{\mbox{\hyperlink{classEvaporationSeries}{Evaporation\+Series}} \&}]{evaporation\+\_\+series,  }\item[{\mbox{\hyperlink{classDataSeries}{Data\+Series}} $\ast$}]{storage\+\_\+area\+\_\+curve,  }\item[{vector$<$ int $>$ $\ast$}]{utilities\+\_\+with\+\_\+allocations,  }\item[{vector$<$ double $>$ $\ast$}]{allocated\+\_\+fractions,  }\item[{vector$<$ double $>$ $\ast$}]{allocated\+\_\+treatment\+\_\+fractions }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classAllocatedReservoir_a22794afc1f06d13fc3099015a2250b0d}\label{classAllocatedReservoir_a22794afc1f06d13fc3099015a2250b0d}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{Allocated\+Reservoir()}{AllocatedReservoir()}\hspace{0.1cm}{\footnotesize\ttfamily [2/5]}}
{\footnotesize\ttfamily Allocated\+Reservoir\+::\+Allocated\+Reservoir (\begin{DoxyParamCaption}\item[{const char $\ast$}]{name,  }\item[{const int}]{id,  }\item[{const vector$<$ \mbox{\hyperlink{classCatchment}{Catchment}} $\ast$$>$ \&}]{catchments,  }\item[{const double}]{capacity,  }\item[{const double}]{max\+\_\+treatment\+\_\+capacity,  }\item[{\mbox{\hyperlink{classEvaporationSeries}{Evaporation\+Series}} \&}]{evaporation\+\_\+series,  }\item[{\mbox{\hyperlink{classDataSeries}{Data\+Series}} $\ast$}]{storage\+\_\+area\+\_\+curve,  }\item[{const vector$<$ double $>$ \&}]{construction\+\_\+time\+\_\+range,  }\item[{double}]{permitting\+\_\+period,  }\item[{\mbox{\hyperlink{classBond}{Bond}} \&}]{bond,  }\item[{vector$<$ int $>$ $\ast$}]{utilities\+\_\+with\+\_\+allocations,  }\item[{vector$<$ double $>$ $\ast$}]{allocated\+\_\+fractions,  }\item[{vector$<$ double $>$ $\ast$}]{allocated\+\_\+treatment\+\_\+fractions }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classAllocatedReservoir_a17a60d40d936b1a68459d0bd9578aada}\label{classAllocatedReservoir_a17a60d40d936b1a68459d0bd9578aada}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{Allocated\+Reservoir()}{AllocatedReservoir()}\hspace{0.1cm}{\footnotesize\ttfamily [3/5]}}
{\footnotesize\ttfamily Allocated\+Reservoir\+::\+Allocated\+Reservoir (\begin{DoxyParamCaption}\item[{const char $\ast$}]{name,  }\item[{const int}]{id,  }\item[{const vector$<$ \mbox{\hyperlink{classCatchment}{Catchment}} $\ast$$>$ \&}]{catchments,  }\item[{const double}]{capacity,  }\item[{const double}]{max\+\_\+treatment\+\_\+capacity,  }\item[{\mbox{\hyperlink{classEvaporationSeries}{Evaporation\+Series}} \&}]{evaporation\+\_\+series,  }\item[{double}]{storage\+\_\+area,  }\item[{vector$<$ int $>$ $\ast$}]{utilities\+\_\+with\+\_\+allocations,  }\item[{vector$<$ double $>$ $\ast$}]{allocated\+\_\+fractions,  }\item[{vector$<$ double $>$ $\ast$}]{allocated\+\_\+treatment\+\_\+fractions }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classAllocatedReservoir_a44ac982717a21a0b24bb3019d07ffe89}\label{classAllocatedReservoir_a44ac982717a21a0b24bb3019d07ffe89}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{Allocated\+Reservoir()}{AllocatedReservoir()}\hspace{0.1cm}{\footnotesize\ttfamily [4/5]}}
{\footnotesize\ttfamily Allocated\+Reservoir\+::\+Allocated\+Reservoir (\begin{DoxyParamCaption}\item[{const char $\ast$}]{name,  }\item[{const int}]{id,  }\item[{const vector$<$ \mbox{\hyperlink{classCatchment}{Catchment}} $\ast$$>$ \&}]{catchments,  }\item[{const double}]{capacity,  }\item[{const double}]{max\+\_\+treatment\+\_\+capacity,  }\item[{\mbox{\hyperlink{classEvaporationSeries}{Evaporation\+Series}} \&}]{evaporation\+\_\+series,  }\item[{double}]{storage\+\_\+area,  }\item[{const vector$<$ double $>$ \&}]{construction\+\_\+time\+\_\+range,  }\item[{double}]{permitting\+\_\+period,  }\item[{\mbox{\hyperlink{classBond}{Bond}} \&}]{bond,  }\item[{vector$<$ int $>$ $\ast$}]{utilities\+\_\+with\+\_\+allocations,  }\item[{vector$<$ double $>$ $\ast$}]{allocated\+\_\+fractions,  }\item[{vector$<$ double $>$ $\ast$}]{allocated\+\_\+treatment\+\_\+fractions }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classAllocatedReservoir_a59098eb446ada7a23e914543f3c419c0}\label{classAllocatedReservoir_a59098eb446ada7a23e914543f3c419c0}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{Allocated\+Reservoir()}{AllocatedReservoir()}\hspace{0.1cm}{\footnotesize\ttfamily [5/5]}}
{\footnotesize\ttfamily Allocated\+Reservoir\+::\+Allocated\+Reservoir (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classAllocatedReservoir}{Allocated\+Reservoir}} \&}]{allocated\+\_\+reservoir }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classAllocatedReservoir_a3fc9aaca619a97d338449384e579900c}\label{classAllocatedReservoir_a3fc9aaca619a97d338449384e579900c}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!````~Allocated\+Reservoir@{$\sim$\+Allocated\+Reservoir}}
\index{````~Allocated\+Reservoir@{$\sim$\+Allocated\+Reservoir}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{$\sim$\+Allocated\+Reservoir()}{~AllocatedReservoir()}}
{\footnotesize\ttfamily Allocated\+Reservoir\+::$\sim$\+Allocated\+Reservoir (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classAllocatedReservoir_ab4cd10b1a9b421309844bcec42899b70}\label{classAllocatedReservoir_ab4cd10b1a9b421309844bcec42899b70}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!add\+Capacity@{add\+Capacity}}
\index{add\+Capacity@{add\+Capacity}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{add\+Capacity()}{addCapacity()}}
{\footnotesize\ttfamily void Allocated\+Reservoir\+::add\+Capacity (\begin{DoxyParamCaption}\item[{double}]{capacity }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{classWaterSource_abffedb6e58620b1b1d6f3c4b4480d3a0}{Water\+Source}}.

\mbox{\Hypertarget{classAllocatedReservoir_ab781bee3253277f1dcfa4c12756d9d6f}\label{classAllocatedReservoir_ab781bee3253277f1dcfa4c12756d9d6f}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!add\+Treatment\+Capacity@{add\+Treatment\+Capacity}}
\index{add\+Treatment\+Capacity@{add\+Treatment\+Capacity}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{add\+Treatment\+Capacity()}{addTreatmentCapacity()}}
{\footnotesize\ttfamily void Allocated\+Reservoir\+::add\+Treatment\+Capacity (\begin{DoxyParamCaption}\item[{const double}]{added\+\_\+plant\+\_\+treatment\+\_\+capacity,  }\item[{int}]{utility\+\_\+id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Addes treatment capacity to a source. The specification of both the total treatment capacity of the new plant and the fraction of the treatment capacity allocated to a given utility allow for joint treatment plants. To have one utility only building an exclusive plant, the fraction will be 1. 
\begin{DoxyParams}{Parameters}
{\em added\+\_\+plant\+\_\+treatment\+\_\+capacity} & \\
\hline
{\em allocated\+\_\+fraction\+\_\+of\+\_\+total\+\_\+capacity} & \\
\hline
{\em utility\+\_\+id} & \\
\hline
\end{DoxyParams}
Add capacity to respective treatment allocation.

Update treatment allocation fractions based on new allocated amounts and new total treatment capacity. 

Reimplemented from \mbox{\hyperlink{classWaterSource_a210818957f088da4046597d0f1a1340f}{Water\+Source}}.

\mbox{\Hypertarget{classAllocatedReservoir_aa5a3683ac3a1e7a778627332c6a7fff7}\label{classAllocatedReservoir_aa5a3683ac3a1e7a778627332c6a7fff7}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!apply\+Continuity@{apply\+Continuity}}
\index{apply\+Continuity@{apply\+Continuity}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{apply\+Continuity()}{applyContinuity()}}
{\footnotesize\ttfamily void Allocated\+Reservoir\+::apply\+Continuity (\begin{DoxyParamCaption}\item[{int}]{week,  }\item[{double}]{upstream\+\_\+source\+\_\+inflow,  }\item[{double}]{wastewater\+\_\+inflow,  }\item[{vector$<$ double $>$ \&}]{demand\+\_\+outflow }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Constrain outflow to what is available on water quality pool.

Calculate total runoff inflow reaching reservoir from its watershed.

Calculates water lost through evaporation.

Calculate new stored volume and outflow based on continuity.

Check if spillage is needed and, if so, correct stored volume and calculate spillage and set all allocations to full. Otherwise, distributed inflows and outflows among respective allocations. ~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
 Water exceeding allocated capacities.

Volume of water that entered the reservoir and stayed until being used or released. ~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
 Split among utilities any allocated volume exceeding a giver utility\textquotesingle{}s maximum allocated capacity. ~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
 Calculate combined excess allocation and combined allocation fraction. ~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
~\newline
 Calculation of amount exceeding all individual allocations

Redistribute combined excess among utilities based on their allocation fractions. If one is exceeded, roll \char`\"{}second order\char`\"{} excess down to the next utility. ~\newline
~\newline
~\newline
~\newline
~\newline
 Redistribute excess based on allocations fractions.

Check if redistribution of excesses didn\textquotesingle{}t make an allocation exceed its capacity. ~\newline
~\newline
~\newline
 If there was too much water added to an allocation, redistribute it. ~\newline
~\newline
 If there\textquotesingle{}s still an excess but all allocations are at capacity, release the rest as environmental flows. ~\newline
 Sanity checking from now on. 

Implements \mbox{\hyperlink{classWaterSource_ac070445379fe706f65b977dade4f3fbc}{Water\+Source}}.

\mbox{\Hypertarget{classAllocatedReservoir_a8b9b38494fa23f0bea78134c82644bf1}\label{classAllocatedReservoir_a8b9b38494fa23f0bea78134c82644bf1}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!get\+Allocated\+Capacity@{get\+Allocated\+Capacity}}
\index{get\+Allocated\+Capacity@{get\+Allocated\+Capacity}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{get\+Allocated\+Capacity()}{getAllocatedCapacity()}}
{\footnotesize\ttfamily double Allocated\+Reservoir\+::get\+Allocated\+Capacity (\begin{DoxyParamCaption}\item[{int}]{utility\+\_\+id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Most sources will not have different allocations, so by default this function will return the total capacity. If a source is to have multiple allocations, this function must be overriden to make sure it returns the right value. 
\begin{DoxyParams}{Parameters}
{\em utility\+\_\+id} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classWaterSource_a44102a0eafdaebd86f0ed8dabb313733}{Water\+Source}}.

\mbox{\Hypertarget{classAllocatedReservoir_a731381982c9245b0bf24db4082dc74c1}\label{classAllocatedReservoir_a731381982c9245b0bf24db4082dc74c1}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!get\+Allocated\+Fraction@{get\+Allocated\+Fraction}}
\index{get\+Allocated\+Fraction@{get\+Allocated\+Fraction}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{get\+Allocated\+Fraction()}{getAllocatedFraction()}}
{\footnotesize\ttfamily double Allocated\+Reservoir\+::get\+Allocated\+Fraction (\begin{DoxyParamCaption}\item[{int}]{utility\+\_\+id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{classWaterSource_a1843ada21b8e7500d80a5a7db10621b3}{Water\+Source}}.

\mbox{\Hypertarget{classAllocatedReservoir_aba81b93e1aa1154ce411248903fabde6}\label{classAllocatedReservoir_aba81b93e1aa1154ce411248903fabde6}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!get\+Allocated\+Treatment\+Capacity@{get\+Allocated\+Treatment\+Capacity}}
\index{get\+Allocated\+Treatment\+Capacity@{get\+Allocated\+Treatment\+Capacity}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{get\+Allocated\+Treatment\+Capacity()}{getAllocatedTreatmentCapacity()}}
{\footnotesize\ttfamily double Allocated\+Reservoir\+::get\+Allocated\+Treatment\+Capacity (\begin{DoxyParamCaption}\item[{int}]{utility\+\_\+id }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{classWaterSource_ab3ba86d2a3e864e435ba2b88cceea555}{Water\+Source}}.

\mbox{\Hypertarget{classAllocatedReservoir_ae161ebfc285aa69cb8b7f4fe20ee7a2e}\label{classAllocatedReservoir_ae161ebfc285aa69cb8b7f4fe20ee7a2e}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!get\+Available\+Allocated\+Volume@{get\+Available\+Allocated\+Volume}}
\index{get\+Available\+Allocated\+Volume@{get\+Available\+Allocated\+Volume}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{get\+Available\+Allocated\+Volume()}{getAvailableAllocatedVolume()}}
{\footnotesize\ttfamily double Allocated\+Reservoir\+::get\+Available\+Allocated\+Volume (\begin{DoxyParamCaption}\item[{int}]{utility\+\_\+id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

If creating a new water source that can be allocated to different utilities, this function must be overwritten to\+: return available\+\_\+allocated\+\_\+volumes\mbox{[}utility\+\_\+id\mbox{]}; 
\begin{DoxyParams}{Parameters}
{\em utility\+\_\+id} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classWaterSource_a42c687a3be3d88ba38dbea668c8d35cf}{Water\+Source}}.

\mbox{\Hypertarget{classAllocatedReservoir_a114e9cde6a106b786ca0ed39283cbbed}\label{classAllocatedReservoir_a114e9cde6a106b786ca0ed39283cbbed}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!get\+Supply\+Allocated\+Fraction@{get\+Supply\+Allocated\+Fraction}}
\index{get\+Supply\+Allocated\+Fraction@{get\+Supply\+Allocated\+Fraction}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{get\+Supply\+Allocated\+Fraction()}{getSupplyAllocatedFraction()}}
{\footnotesize\ttfamily double Allocated\+Reservoir\+::get\+Supply\+Allocated\+Fraction (\begin{DoxyParamCaption}\item[{int}]{utility\+\_\+id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{classWaterSource_a71cb8bd481bbce0089aa78dcd1c3309a}{Water\+Source}}.

\mbox{\Hypertarget{classAllocatedReservoir_a9d025365aa42dfff13a0aac8ea7863fa}\label{classAllocatedReservoir_a9d025365aa42dfff13a0aac8ea7863fa}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!mass\+\_\+balance\+\_\+with\+\_\+wq\+\_\+pool@{mass\+\_\+balance\+\_\+with\+\_\+wq\+\_\+pool}}
\index{mass\+\_\+balance\+\_\+with\+\_\+wq\+\_\+pool@{mass\+\_\+balance\+\_\+with\+\_\+wq\+\_\+pool}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{mass\+\_\+balance\+\_\+with\+\_\+wq\+\_\+pool()}{mass\_balance\_with\_wq\_pool()}}
{\footnotesize\ttfamily bool Allocated\+Reservoir\+::mass\+\_\+balance\+\_\+with\+\_\+wq\+\_\+pool (\begin{DoxyParamCaption}\item[{double}]{net\+\_\+inflow,  }\item[{vector$<$ double $>$ \&}]{demand\+\_\+outflow }\end{DoxyParamCaption})}

Split inflows and evaporation among allocations and subtract demands. ~\newline
~\newline
~\newline
~\newline
~\newline
 Flag the occurrence of an allocation exceeding its capacity

If allocated volume gets negative for any utility, charge that consumption (basically evaporation) to the water quality pool. Improvements can be made to this, but it may make code significantly slower.

the water quality pool has no demand but provides the minimum environmental flows. ~\newline
~\newline
 Flag the occurrence of an allocation exceeding its capacity

Get water from water quality pool for supply. Check continuity for errors. \mbox{\Hypertarget{classAllocatedReservoir_ac719b30d5a83ba19ea722449ce9580e1}\label{classAllocatedReservoir_ac719b30d5a83ba19ea722449ce9580e1}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!mass\+\_\+balance\+\_\+without\+\_\+wq\+\_\+pool@{mass\+\_\+balance\+\_\+without\+\_\+wq\+\_\+pool}}
\index{mass\+\_\+balance\+\_\+without\+\_\+wq\+\_\+pool@{mass\+\_\+balance\+\_\+without\+\_\+wq\+\_\+pool}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{mass\+\_\+balance\+\_\+without\+\_\+wq\+\_\+pool()}{mass\_balance\_without\_wq\_pool()}}
{\footnotesize\ttfamily bool Allocated\+Reservoir\+::mass\+\_\+balance\+\_\+without\+\_\+wq\+\_\+pool (\begin{DoxyParamCaption}\item[{double}]{net\+\_\+inflow,  }\item[{vector$<$ double $>$ \&}]{demand\+\_\+outflow }\end{DoxyParamCaption})}

Split inflows, min environmental outflows and evaporation among allocations and subtract demands. ~\newline
 Flag the occurrence of an allocation exceeding its capacity \mbox{\Hypertarget{classAllocatedReservoir_a83551e53169014906ce7380005efb4f8}\label{classAllocatedReservoir_a83551e53169014906ce7380005efb4f8}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!operator=@{operator=}}
\index{operator=@{operator=}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classAllocatedReservoir}{Allocated\+Reservoir}} \& Allocated\+Reservoir\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classAllocatedReservoir}{Allocated\+Reservoir}} \&}]{allocated\+\_\+reservoir }\end{DoxyParamCaption})}

Copy assignment operator 
\begin{DoxyParams}{Parameters}
{\em allocated\+\_\+reservoir} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\end{DoxyReturn}
\mbox{\Hypertarget{classAllocatedReservoir_a3a9b7ce2e1d42cc373095cfd40ef2ae2}\label{classAllocatedReservoir_a3a9b7ce2e1d42cc373095cfd40ef2ae2}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!remove\+Water@{remove\+Water}}
\index{remove\+Water@{remove\+Water}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{remove\+Water()}{removeWater()}}
{\footnotesize\ttfamily void Allocated\+Reservoir\+::remove\+Water (\begin{DoxyParamCaption}\item[{int}]{allocation\+\_\+id,  }\item[{double}]{volume }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

If creating a new water source that can be allocated to different utilities, this function must be overwritten to\+: available\+\_\+allocated\+\_\+volumes\mbox{[}allocation\+\_\+id\mbox{]} -\/= volume; available\+\_\+volume -\/= volume; demand += volume; 
\begin{DoxyParams}{Parameters}
{\em utility\+\_\+id} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classWaterSource_ab697c3a0765d445f72533f6a5f139bd9}{Water\+Source}}.

\mbox{\Hypertarget{classAllocatedReservoir_aea294cbca1e1630a1307072632d14b05}\label{classAllocatedReservoir_aea294cbca1e1630a1307072632d14b05}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!set\+Full@{set\+Full}}
\index{set\+Full@{set\+Full}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{set\+Full()}{setFull()}}
{\footnotesize\ttfamily void Allocated\+Reservoir\+::set\+Full (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{classWaterSource_a5f8007eb1ae604cfaa67ebb4c0c46eb1}{Water\+Source}}.

\mbox{\Hypertarget{classAllocatedReservoir_a739d93f7981f597a3db0a3d613304b8e}\label{classAllocatedReservoir_a739d93f7981f597a3db0a3d613304b8e}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!set\+Online@{set\+Online}}
\index{set\+Online@{set\+Online}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{set\+Online()}{setOnline()}}
{\footnotesize\ttfamily void Allocated\+Reservoir\+::set\+Online (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

start empty and gradually fill as inflows start coming in.

set all allocated volumes to zero 

Reimplemented from \mbox{\hyperlink{classWaterSource_ab3396e2915db91a6c82e0f29c7889df4}{Water\+Source}}.



\subsection{Member Data Documentation}
\mbox{\Hypertarget{classAllocatedReservoir_ae34d7123ff096d676609e32ba4b83e47}\label{classAllocatedReservoir_ae34d7123ff096d676609e32ba4b83e47}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!continuity\+\_\+error@{continuity\+\_\+error}}
\index{continuity\+\_\+error@{continuity\+\_\+error}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{continuity\+\_\+error}{continuity\_error}}
{\footnotesize\ttfamily double Allocated\+Reservoir\+::continuity\+\_\+error\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{classAllocatedReservoir_af6a1924f60de19b7f77781af0419c39b}\label{classAllocatedReservoir_af6a1924f60de19b7f77781af0419c39b}} 
\index{Allocated\+Reservoir@{Allocated\+Reservoir}!has\+\_\+water\+\_\+quality\+\_\+pool@{has\+\_\+water\+\_\+quality\+\_\+pool}}
\index{has\+\_\+water\+\_\+quality\+\_\+pool@{has\+\_\+water\+\_\+quality\+\_\+pool}!Allocated\+Reservoir@{Allocated\+Reservoir}}
\subsubsection{\texorpdfstring{has\+\_\+water\+\_\+quality\+\_\+pool}{has\_water\_quality\_pool}}
{\footnotesize\ttfamily const bool Allocated\+Reservoir\+::has\+\_\+water\+\_\+quality\+\_\+pool\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/\+System\+Components/\+Water\+Sources/\mbox{\hyperlink{AllocatedReservoir_8h}{Allocated\+Reservoir.\+h}}\item 
src/\+System\+Components/\+Water\+Sources/\mbox{\hyperlink{AllocatedReservoir_8cpp}{Allocated\+Reservoir.\+cpp}}\end{DoxyCompactItemize}
