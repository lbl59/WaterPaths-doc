<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WaterPaths: Transfers::Transfers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WaterPaths
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="classTransfers.html">Transfers</a></li>  </ul>
</div>
</div><!-- top -->
<div class="contents">
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td valign="top">
      <div class="navtab">
        <table>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a2acc8cfe6a1978d2468be289db636226.html#a2acc8cfe6a1978d2468be289db636226">A</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a3c1930dbeb1273c1c0be93ad5ca57357.html#a3c1930dbeb1273c1c0be93ad5ca57357">addSystemComponents</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a1c2d27eb4e9294e32f04b5e7d929e71f.html#a1c2d27eb4e9294e32f04b5e7d929e71f">Aeq</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_ad956149e16363b5a04fd0a4f6efb3a61.html#ad956149e16363b5a04fd0a4f6efb3a61">allocations</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a22f332495395f41b340e370535a6b27a.html#a22f332495395f41b340e370535a6b27a">allocations_aux</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_ad9e4e83ff763ac1ba518a19051cd2e69.html#ad9e4e83ff763ac1ba518a19051cd2e69">applyPolicy</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a7715c87efbee763488d6fcc4674f2523.html#a7715c87efbee763488d6fcc4674f2523">average_pipe_capacity</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a24e66988fb2e50d151859813fda2e740.html#a24e66988fb2e50d151859813fda2e740">b</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a39d45672a21ce1a45925eceea79b921a.html#a39d45672a21ce1a45925eceea79b921a">beq</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a55506f9588e0132ffcad1cf0036a83af.html#a55506f9588e0132ffcad1cf0036a83af">buyers_ids</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a6eab429701a7e1dc857675cc8571589c.html#a6eab429701a7e1dc857675cc8571589c">buyers_transfer_triggers</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a2989642c0fe0544dd9345d45042933d5.html#a2989642c0fe0544dd9345d45042933d5">conveyed_volumes</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a77db57256093921b04035c1e38a20060.html#a77db57256093921b04035c1e38a20060">f</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_af4ef4c75d49dfb3aee476c0695ff41d5.html#af4ef4c75d49dfb3aee476c0695ff41d5">flow_rates_and_allocations</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a6c687c9f767ea915eead1f5db18711a2.html#a6c687c9f767ea915eead1f5db18711a2">getAllocations</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_aec57a6a75061f18404e30d8e48c45ffd.html#aec57a6a75061f18404e30d8e48c45ffd">H</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a10e5cae64016e52eca5dccc8e01e9791.html#a10e5cae64016e52eca5dccc8e01e9791">lb</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a75342a7c14b2ff69eb2520de240a1131.html#a75342a7c14b2ff69eb2520de240a1131">setRealization</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a156baa248ab355c895a0a2f9e5f2742a.html#a156baa248ab355c895a0a2f9e5f2742a">solve_QP</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a69a7ec8b065b9c807e2256f205a3d41e.html#a69a7ec8b065b9c807e2256f205a3d41e">source_treatment_buffer</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a8c84c081f069f6835e9dd12a460d90eb.html#a8c84c081f069f6835e9dd12a460d90eb">source_utility</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a4513cfef08bd7e9980d098f8fb7d6a32.html#a4513cfef08bd7e9980d098f8fb7d6a32">source_utility_id</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a6a23dc463d7a4b07bcb7f3a7472263b2.html#a6a23dc463d7a4b07bcb7f3a7472263b2">transfer_water_source</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a039a24fe986a718da1ac61bac0e49644.html#a039a24fe986a718da1ac61bac0e49644">transfer_water_source_id</a></td></tr>
          <tr><td class="navtab"><a class="qindexHL" href="classTransfers_a40555bc28e085d0e119a9f039317c79f.html#a40555bc28e085d0e119a9f039317c79f">Transfers</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_af88f7908692240eec9f3179128c6f343.html#af88f7908692240eec9f3179128c6f343">Transfers</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_aab0d3f08ed2897d9a74c9970612231d5.html#aab0d3f08ed2897d9a74c9970612231d5">ub</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a420b61c6ff119fef48a39a39ae4e0958.html#a420b61c6ff119fef48a39a39ae4e0958">util_id_to_vertex_id</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classTransfers_a5dfeafe7a9b9a446b1ab746b65ef3b4b.html#a5dfeafe7a9b9a446b1ab746b65ef3b4b">~Transfers</a></td></tr>
        </table>
      </div>
   </td>
   <td valign="top" class="mempage">
<a id="a40555bc28e085d0e119a9f039317c79f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40555bc28e085d0e119a9f039317c79f">&#9670;&nbsp;</a></span>Transfers() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Transfers::Transfers </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>source_utility_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>transfer_water_source_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>source_treatment_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>buyers_ids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>pipe_transfer_capacities</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>buyers_transfer_triggers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classGraph.html">Graph</a>&#160;</td>
          <td class="paramname"><em>utilities_graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; double &gt;&#160;</td>
          <td class="paramname"><em>conveyance_costs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; int &gt;&#160;</td>
          <td class="paramname"><em>pipe_owner</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocates transfers by trying to minimize the mean square error between the optimal allocations and allocation requests, and between the available amount of water from source and actual conveyed capacity, which is limited by pipe conveyance capacities.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>transfer policy ID. </td></tr>
    <tr><td class="paramname">source_utility_id</td><td>ID of source utility. </td></tr>
    <tr><td class="paramname">source_treatment_buffer</td><td>treatment capacity to be left unused in source utility. </td></tr>
    <tr><td class="paramname">buyers_ids</td><td></td></tr>
    <tr><td class="paramname">pipe_transfer_capacities</td><td></td></tr>
    <tr><td class="paramname">buyers_transfer_triggers</td><td></td></tr>
    <tr><td class="paramname">conveyance_costs</td><td>amount charged by pipe owning utility to convey water to another utility. </td></tr>
    <tr><td class="paramname">pipe_owner</td><td>id of utility owning each pipe.</td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd><p class="startdd">add the possibility of two or more sources. </p>
<p>add the possibility of having a pipe belong to a utility not in the transfer agreement. This can be accomplished now by adding utility to transfer agreement and set its risk of failure to 1.1 or more. </p>
<p class="enddd">calculation and charge of wheeling fees. </p>
</dd></dl>
<p>Map buyer's IDs to vertexes ID starting from 0 for the sake of determining payments. <br />
<br />
<br />
<br />
<br />
<br />
 Create QP matrices and vectors. min f(x) = 1/2 x G x' + g0 x' s.t. CE.x = ce0 CI.x &gt;= ci0 lb &lt;= x &lt;= ub <br />
<br />
<br />
<br />
<br />
 Create g0 vector of 0's to be filled when policy is applied.</p>
<p>size is number of variables x number of utilities (source + requesting utilities). Continuity matrix: +1 for flow entering utility and -1 for leaving. <br />
<br />
<br />
 Create ce0 vector of 0 so that mass balance is enforced on the nodes (utilities). <br />
<br />
 Create empty CI and ci0. They'll be re-dimensioned in the QP solver.</p>
<p>Fill in pipe capacities part of lower and upper bound vectors. </p>

</div>
</div>
    </td>
  </tr>
</table>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
